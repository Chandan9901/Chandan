<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeBrowse Search</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f4f9; display: flex; justify-content: center; height: 100vh; margin: 0; }
        .card { background: white; padding: 30px; border-radius: 20px; text-align: center; width: 90%; max-width: 400px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h2 { margin-top: 0; color: #333; }
        
        /* Parent Email Label */
        label { display: block; text-align: left; font-size: 12px; color: #555; margin-top: 15px; font-weight: bold; }
        
        /* LOCKED EMAIL BOX STYLE */
        .locked-input { 
            width: 100%; padding: 12px; margin: 5px 0 15px 0; 
            border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; 
            background-color: #e9ecef; /* Grey background */
            color: #495057; 
            cursor: not-allowed; /* Shows 'ban' cursor on PC */
        }
        
        input[type="text"] { width: 100%; padding: 12px; margin: 5px 0 20px 0; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; }
        
        .btn-group { display: flex; gap: 10px; justify-content: center; }
        button { padding: 12px; border: none; border-radius: 8px; cursor: pointer; color: white; font-weight: bold; flex: 1; transition: 0.2s; }
        button:active { transform: scale(0.98); }
        
        .google { background: #4285F4; }
        .youtube { background: #FF0000; }
        .wiki { background: #000; }
        
        #msg { margin-top: 15px; padding: 15px; display: none; border-radius: 8px; font-size: 14px; line-height: 1.4; }
        .error { background: #ffebee; color: #c62828; border: 1px solid #ffcdd2; }
        .safe { background: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9; }
    </style>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            // ‚úÖ PUBLIC KEY (Verified from your screenshot)
            // If this still fails, please manually re-copy it from your dashboard
            emailjs.init("ow7lbBw-29UnryhgE"); 
        })();
    </script>
</head>
<body>

<div class="card">
    <h2>ü¶Å SafeBrowse</h2>
    
    <label>üîí Parent Alert Email (Fixed):</label>
    <input type="text" class="locked-input" value="eone3951@gmail.com" readonly>

    <label>Search:</label>
    <input type="text" id="searchBox" placeholder="Type here (e.g. 'kill')">
    
    <div class="btn-group">
        <button class="google" onclick="check('google')">Google</button>
        <button class="youtube" onclick="check('youtube')">YouTube</button>
        <button class="wiki" onclick="check('wiki')">Wiki</button>
    </div>

    <div id="msg"></div>
</div>

<script>
    // ‚úÖ IDs verified from your screenshots
    const serviceID = "service_w6e9m0l";
    const templateID = "template_42tnaeh";

    const badWords = ["porn", "xxx", "sex", "kill", "drug", "18+", "murder", "gun", "suicide", "bomb"];

    function check(platform) {
        let text = document.getElementById("searchBox").value.toLowerCase();
        let msgBox = document.getElementById("msg");

        if(!text) return alert("Please type something!");

        let isUnsafe = badWords.some(w => text.includes(w));

        if (isUnsafe) {
            // --- BLOCKED ---
            msgBox.style.display = "block";
            msgBox.className = "error";
            msgBox.innerHTML = `‚ö†Ô∏è <b>BLOCKED</b><br>Sending alert to parent...`;

            emailjs.send(serviceID, templateID, {
                message: text,
                to_name: "Parent"
            })
            .then(() => {
                msgBox.innerHTML = `üö´ <b>BLOCKED</b><br>Alert successfully sent to <b>eone3951@gmail.com</b>!`;
            })
            .catch((err) => {
                // If you see this error, it means the Public Key is still wrong
                msgBox.innerHTML = "üö´ BLOCKED. (Error: " + JSON.stringify(err) + ")";
            });

        } else {
            // --- SAFE ---
            msgBox.style.display = "block";
            msgBox.className = "safe";
            msgBox.innerHTML = "‚úÖ Safe content. Opening...";
            
            setTimeout(() => {
                if(platform === 'google') window.location.href = "https://www.google.com/search?q=" + text;
                if(platform === 'youtube') window.location.href = "https://www.youtube.com/results?search_query=" + text;
                if(platform === 'wiki') window.location.href = "https://en.wikipedia.org/wiki/" + text;
            }, 1000);
        }
    }
</script>

</body>
</html>
